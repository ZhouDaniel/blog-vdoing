---
title: 一些js注意点
date: 2021-11-08 15:07:51
permalink: /pages/c4860f/
categories:
  - 前端
  - JavaScript文章
  - 三级目录
tags:
  - 
---

# JS 一些注意点

## 一 for 和 forEach 循环
在forEach中不能使用break，可以使用return，但是使用return不会中断循环，在for循环中会中断循环，如果要让forEach中断循环，需要使用try catch

## 二 不管async返回的什么，只要在async里面写了return，外部拿到的都是promise对象
```js
async fn() {
    return a
}
console.log(fn()) // promise
```

## 三 如果要使用数组的forEach()方法对其改值时，需要直接通过arr[i]这种方式来更改。
```js
// 数组改值
    let arr = [1,3,5,7,9];
    arr.forEach(function(item){
        item = 30;
    })
    console.log(arr);   //输出 (5) [1, 3, 5, 7, 9]
```
显然没有达成目的，下边这样写可以实现
```js
　　 // 数组改值
    let arr = [1,3,5,7,9];
    arr.forEach(function(item,index,arr){
        arr[index] = 30;
    })
    console.log(arr); //输出 (5) [30, 30, 30, 30, 30]
```

### 另外
```js

var arr1 = [1,2,3,4];
 
var arr2 = [{a:1},{a:2},{a:3}];
 
arr1.forEach(item =>{
 
    item = item * item;
 
});
arr2.forEach(item =>{
 
    item.a = item.a * item.a;
 
});
console.log(arr1); // [1,2,3,4]
 ```
 forEach 在对 item 进行修改的时候，如果 item 是原始类型的值，item 对应的 的内存地址实际并没有变化,
如果 item 是 引用类型的值，item 对应多的内存地址也没有变化，但是对应的值，已经重写了

## 四 if语句 是否执行
```js
if(a) {
    console.log('执行')
}
```
a 为0 ，null，undefiend,false, '' 不会执行 `'0'`会执行

## 五 空数组的forEach不会执行，空数组的every总是会返回true，some会返回false


## 六 数组里的字符串转换成数字或者把数字转换成字符串
```js
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];
arr.map(String);  //结果： ['1', '2', '3', '4', '5', '6', '7', '8', '9']

var a = ['1', '2', '3', '4', '5', '6', '7', '8', '9']
a.map(Number);  //结果：[1, 2, 3, 4, 5, 6, 7, 8, 9]

```

